(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const GridHelper_1=require("./GridHelper");class AI{constructor(e){this.board=e}pickSquare(){const e=GridHelper_1.default.getAvailableSquareIds(this.board);return e[Math.floor(Math.random()*e.length)]}}exports.default=AI;

},{"./GridHelper":5}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Board{constructor(){this.squares=new Array(9)}getCurrentPlayer(){let e;return e=void 0===this.lastValue?"X":"X"===this.lastValue?"O":"X",this.lastValue=e}getSquare(e){if(e<1||e>9)throw new RangeError(`${e} is out of bounds (can only be 1 - 9)`);return this.squares[e]}setSquare(e){if(void 0!==this.getSquare(e))throw new Error(`${e} already has a value`);return this.squares[e]=this.getCurrentPlayer(),this}hasWinner(){const e=[[1,2,3],[4,5,6],[7,8,9],[1,5,9],[7,5,3]];for(const r of e){if(r.reduce((e,r,t,i)=>{if(0===t)return void 0!==this.getSquare(r);if(!e)return!1;const n=this.getSquare(r),s=this.getSquare(i[t-1]);return void 0!==s&&n===s},!1))return this.winningLine=r,!0}return!1}getWinner(){if(this.winningLine)return this.getSquare(this.winningLine[0])}getWinningLine(){return this.winningLine}reset(){return this.squares=new Array(9),this.winningLine=void 0,this}}exports.default=Board;

},{}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const GRID_SIZE=100,PADDING=10;class Canvas{constructor(t){this.element=t,this.init()}onClick(t){this.onClickCallback=t}reset(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderGrid()}renderGrid(){this.context.lineWidth=1,this.context.strokeStyle="black";for(let t=0;t<3;t++)for(let e=0;e<3;e++){const[s,i]=this.getPositions(e,t);this.context.strokeRect(s+1,i+1,GRID_SIZE,GRID_SIZE)}}renderCircle(t,e){const[s,i]=this.getPositions(t,e),n=(GRID_SIZE-2*PADDING)/2;this.context.beginPath(),this.context.lineWidth=3,this.context.strokeStyle="blue",this.context.arc(s+n+PADDING,i+n+PADDING,n,0,2*Math.PI),this.context.stroke(),this.context.closePath()}renderCross(t,e){const[s,i]=this.getPositions(t,e),n=s+PADDING,o=s+GRID_SIZE-PADDING,c=i+PADDING,h=i+GRID_SIZE-PADDING;this.context.beginPath(),this.context.lineWidth=3,this.context.strokeStyle="orange",this.context.moveTo(n,c),this.context.lineTo(o,h),this.context.moveTo(n,h),this.context.lineTo(o,c),this.context.stroke(),this.context.closePath()}renderWinningLine(t,e,s,i){const n=GRID_SIZE/2,o=Number(t)*GRID_SIZE+n,c=Number(e)*GRID_SIZE+n,h=Number(s)*GRID_SIZE+n,a=Number(i)*GRID_SIZE+n;this.context.beginPath(),this.context.lineWidth=4,this.context.strokeStyle="red",this.context.moveTo(o,c),this.context.lineTo(h,a),this.context.stroke(),this.context.closePath()}init(){this.canvas=document.createElement("canvas"),this.canvas.setAttribute("width","302"),this.canvas.setAttribute("height","302"),this.element.append(this.canvas),this.context=this.canvas.getContext("2d"),this.canvas.addEventListener("click",this.handleClick.bind(this))}handleClick(t){if(this.onClickCallback){const e=Math.floor((t.clientX-this.canvas.offsetLeft)/GRID_SIZE),s=Math.floor((t.clientY-this.canvas.offsetTop)/GRID_SIZE);this.onClickCallback(e,s)}}getPositions(t,e){return[Number(t)*GRID_SIZE,Number(e)*GRID_SIZE]}}exports.default=Canvas;

},{}],4:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const AI_1=require("./AI"),Board_1=require("./Board"),Canvas_1=require("./Canvas"),GridHelper_1=require("./GridHelper");class Game{constructor(e,r=!1){this.board=new Board_1.default,this.ai=r?new AI_1.default(this.board):void 0,this.canvas=new Canvas_1.default(e),this.canvas.onClick(this.handleClick.bind(this)),this.canvas.renderGrid()}handleClick(e,r){this.board.hasWinner()||0===GridHelper_1.default.getAvailableSquareIds(this.board).length?this.reset():(this.chooseSquare(e,r),this.ai&&this.chooseSquare(...GridHelper_1.default.fromSquareId(this.ai.pickSquare())))}chooseSquare(e,r){try{this.board.setSquare(GridHelper_1.default.toSquareId(e,r));const a=this.board.getSquare(GridHelper_1.default.toSquareId(e,r));if("X"===a?this.canvas.renderCross(e,r):"O"===a&&this.canvas.renderCircle(e,r),this.board.hasWinner()){const e=this.board.getWinningLine(),[r,a]=GridHelper_1.default.fromSquareId(e[0]),[i,s]=GridHelper_1.default.fromSquareId(e[2]);this.canvas.renderWinningLine(r,a,i,s)}}catch(e){}}reset(){this.board.reset(),this.canvas.reset()}}exports.default=Game;

},{"./AI":1,"./Board":2,"./Canvas":3,"./GridHelper":5}],5:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const GRID=[[1,2,3],[4,5,6],[7,8,9]],GridHelper={fromSquareId:e=>{for(const r in GRID)for(const t in GRID[r])if(GRID[r][t]===e)return[Number(t),Number(r)]},toSquareId:(e,r)=>GRID[r][e],getAvailableSquareIds:e=>{const r=[];for(const t in GRID)for(const o in GRID[t]){const n=GRID[t][o];void 0===e.getSquare(n)&&r.push(n)}return r}};exports.default=GridHelper;

},{}],6:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Game_1=require("./Game");new Game_1.default(document.getElementById("game"),!0);

},{"./Game":4}]},{},[6]);
